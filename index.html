<!DOCTYPE html>
<html lang="en" class="cyberpunk-mode">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="CyberAgent - Advanced AI Assistant with Multi-Tool Capabilities, Voice Interface, and Real-time Collaboration"
    />
    <meta
      name="keywords"
      content="AI assistant, chat interface, web search, code execution, voice assistant"
    />
    <meta name="author" content="Gaurav Tomar" />

    <!-- PWA Support -->
    <meta name="theme-color" content="#00ff41" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="CyberAgent Pro" />

    <!-- Preconnect to improve performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- CYBERPUNK FONTS -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Particles.js for effects -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

    <!-- Code highlighting -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/base16/monokai.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json" />

    <title>CyberAgent - Advanced AI Assistant</title>
    <link rel="stylesheet" href="styles.css" />

    <!-- CYBERPUNK STYLING -->
    <style>
      :root {
        --neon-green: #00ff41;
        --neon-blue: #0066ff;
        --neon-purple: #9d00ff;
        --neon-pink: #ff0080;
        --cyberpunk-red: #ff073a;
        --electric-blue: #00d4ff;
        --dark-bg: #0a0a0a;
      }

      * {
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, #0a0a0a 0%, #1a0033 50%, #000 100%);
        font-family: "Rajdhani", "Inter", sans-serif;
        color: var(--neon-green);
        overflow-x: hidden;
        position: relative;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 80%,
            #00ff4115 0%,
            transparent 50%
          ),
          radial-gradient(circle at 80% 20%, #ff008015 0%, transparent 50%),
          radial-gradient(circle at 40% 40%, #0066ff15 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }

      @keyframes glitch {
        0% {
          transform: translate(0);
        }
        20% {
          transform: translate(-1px, 1px);
        }
        40% {
          transform: translate(-1px, -1px);
        }
        60% {
          transform: translate(1px, 1px);
        }
        80% {
          transform: translate(1px, -1px);
        }
        100% {
          transform: translate(0);
        }
      }

      @keyframes neonPulse {
        0%,
        100% {
          text-shadow: 0 0 5px var(--neon-green), 0 0 10px var(--neon-green),
            0 0 15px var(--neon-green);
        }
        50% {
          text-shadow: 0 0 10px var(--neon-green), 0 0 20px var(--neon-green),
            0 0 30px var(--neon-green);
        }
      }

      @keyframes matrixRain {
        0% {
          transform: translateY(-100vh);
          opacity: 1;
        }
        100% {
          transform: translateY(100vh);
          opacity: 0;
        }
      }

      .cyberpunk-glow {
        text-shadow: 0 0 10px var(--neon-green);
        animation: neonPulse 3s infinite;
      }

      .glitch-effect {
        animation: glitch 0.3s infinite;
      }

      .cyberpunk-border {
        border: 2px solid var(--neon-green);
        box-shadow: 0 0 10px var(--neon-green),
          inset 0 0 10px rgba(0, 255, 65, 0.1);
      }

      .matrix-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        opacity: 0.05;
      }

      .matrix-column {
        position: absolute;
        top: -100vh;
        color: var(--neon-green);
        font-family: "JetBrains Mono", monospace;
        font-size: 12px;
        animation: matrixRain linear infinite;
        text-shadow: 0 0 5px var(--neon-green);
      }

      #particles-js {
        position: fixed;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: -1;
      }

      /* Original styles enhanced with cyberpunk */
      .app-container {
        background: rgba(10, 10, 10, 0.9);
        min-height: 100vh;
      }

      .top-nav {
        background: rgba(0, 0, 0, 0.9);
        border-bottom: 2px solid var(--neon-green);
        box-shadow: 0 2px 20px rgba(0, 255, 65, 0.3);
      }

      .nav-brand {
        color: var(--neon-green);
        font-family: "Orbitron", sans-serif;
        font-weight: 700;
      }

      .brand-text {
        animation: neonPulse 3s infinite;
      }

      .nav-btn,
      .hud-btn {
        background: rgba(0, 255, 65, 0.1);
        border: 1px solid var(--neon-green);
        color: var(--neon-green);
        transition: all 0.3s ease;
      }

      .nav-btn:hover,
      .hud-btn:hover {
        background: rgba(0, 255, 65, 0.2);
        box-shadow: 0 0 15px var(--neon-green);
        transform: translateY(-2px);
      }

      .sidebar {
        background: rgba(0, 0, 0, 0.8);
        border-right: 2px solid var(--neon-green);
        box-shadow: 2px 0 20px rgba(0, 255, 65, 0.2);
      }

      .main-content {
        background: rgba(0, 0, 0, 0.7);
      }

      .chat-header {
        border-bottom: 1px solid var(--neon-green);
        background: rgba(0, 0, 0, 0.8);
      }

      .welcome-screen {
        background: transparent;
      }

      .welcome-icon i {
        color: var(--neon-green);
        animation: neonPulse 2s infinite;
      }

      .capability-card {
        background: rgba(0, 255, 65, 0.05);
        border: 1px solid var(--neon-green);
        border-radius: 8px;
        transition: all 0.3s ease;
      }

      .capability-card:hover {
        background: rgba(0, 255, 65, 0.1);
        box-shadow: 0 5px 20px rgba(0, 255, 65, 0.3);
        transform: translateY(-5px);
      }

      .quick-action {
        background: rgba(0, 255, 65, 0.1);
        border: 2px solid var(--neon-green);
        color: var(--neon-green);
        font-family: "Rajdhani", sans-serif;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .quick-action:hover {
        background: rgba(0, 255, 65, 0.2);
        box-shadow: 0 0 20px var(--neon-green);
        color: #000;
        background-color: var(--neon-green);
      }

      .input-area {
        border-top: 2px solid var(--neon-green);
        background: rgba(0, 0, 0, 0.9);
      }

      #user-input {
        background: rgba(0, 255, 65, 0.05);
        border: 2px solid var(--neon-green);
        color: var(--neon-green);
        font-family: "JetBrains Mono", monospace;
      }

      #user-input:focus {
        box-shadow: 0 0 20px var(--neon-green),
          inset 0 0 20px rgba(0, 255, 65, 0.1);
        border-color: var(--electric-blue);
      }

      .send-btn {
        background: var(--neon-green);
        border: none;
        color: #000;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .send-btn:hover {
        background: var(--electric-blue);
        box-shadow: 0 0 20px var(--electric-blue);
        transform: scale(1.1);
      }

      .file-btn {
        background: rgba(255, 20, 147, 0.8);
        border: 1px solid var(--neon-pink);
        color: white;
        transition: all 0.3s ease;
      }

      .file-btn:hover {
        background: var(--neon-pink);
        box-shadow: 0 0 15px var(--neon-pink);
        transform: scale(1.1);
        color: #000;
      }

      .file-types-hint {
        color: rgba(0, 255, 65, 0.6);
        font-size: 0.75rem;
        margin-top: 5px;
        display: block;
        font-family: "JetBrains Mono", monospace;
      }

      .loading-screen {
        background: rgba(0, 0, 0, 0.95);
      }

      .loading-logo i {
        color: var(--neon-green);
        animation: neonPulse 1s infinite;
      }

      .modal-content {
        background: rgba(0, 0, 0, 0.95);
        border: 2px solid var(--neon-green);
        color: var(--neon-green);
      }

      .form-control {
        background: rgba(0, 255, 65, 0.05);
        border: 1px solid var(--neon-green);
        color: var(--neon-green);
      }

      .form-control:focus {
        background: rgba(0, 255, 65, 0.1);
        border-color: var(--neon-green);
        box-shadow: 0 0 10px var(--neon-green);
        color: var(--neon-green);
      }

      .form-control::placeholder {
        color: rgba(0, 255, 65, 0.4);
        opacity: 1;
      }

      .form-control::-webkit-input-placeholder {
        color: rgba(0, 255, 65, 0.4);
      }

      .form-control::-moz-placeholder {
        color: rgba(0, 255, 65, 0.4);
        opacity: 1;
      }

      .btn-primary {
        background: var(--neon-green);
        border-color: var(--neon-green);
        color: #000;
        font-weight: bold;
      }

      .btn-primary:hover {
        background: var(--electric-blue);
        border-color: var(--electric-blue);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Orbitron", sans-serif;
        color: var(--neon-green);
      }

      .neon-text {
        color: var(--neon-green);
        animation: neonPulse 2s infinite;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 600;
      }

      /* CONVERSATION DELETE FUNCTIONALITY */
      .conversation-item {
        position: relative;
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
        padding: 12px;
        margin: 8px 0;
        background: rgba(0, 255, 65, 0.05);
        border-radius: 8px;
        cursor: pointer;
      }

      .conversation-item:hover {
        background: rgba(0, 255, 65, 0.1);
        border-left-color: var(--neon-green);
        box-shadow: 0 0 15px rgba(0, 255, 65, 0.3);
      }

      .conversation-item.active {
        background: rgba(0, 255, 65, 0.15);
        border-left-color: var(--electric-blue);
        box-shadow: 0 0 20px rgba(0, 255, 65, 0.4);
      }

      .conversation-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 4px;
      }

      .conversation-title {
        color: var(--neon-green);
        font-weight: 600;
        font-size: 14px;
        margin: 0;
        flex: 1;
      }

      .conversation-preview {
        color: rgba(0, 255, 65, 0.7);
        font-size: 12px;
        opacity: 0.8;
        margin-top: 4px;
        line-height: 1.3;
      }

      .delete-conversation-btn {
        background: rgba(255, 7, 58, 0.1);
        border: 1px solid var(--cyberpunk-red);
        color: var(--cyberpunk-red);
        width: 24px;
        height: 24px;
        border-radius: 4px;
        font-size: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        opacity: 0;
        margin-left: 8px;
        flex-shrink: 0;
      }

      .conversation-item:hover .delete-conversation-btn {
        opacity: 1;
      }

      .delete-conversation-btn:hover {
        background: rgba(255, 7, 58, 0.2);
        box-shadow: 0 0 10px var(--cyberpunk-red);
        transform: scale(1.1);
      }

      .delete-confirmation-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
      }

      .delete-confirmation-content {
        background: rgba(0, 0, 0, 0.95);
        border: 2px solid var(--cyberpunk-red);
        border-radius: 8px;
        padding: 24px;
        max-width: 400px;
        text-align: center;
        box-shadow: 0 0 30px var(--cyberpunk-red);
      }

      .delete-confirmation-title {
        color: var(--cyberpunk-red);
        font-family: "Orbitron", sans-serif;
        font-size: 18px;
        margin-bottom: 16px;
        animation: neonPulse 2s infinite;
      }

      .delete-confirmation-text {
        color: var(--neon-green);
        margin-bottom: 24px;
        line-height: 1.5;
      }

      .delete-confirmation-buttons {
        display: flex;
        gap: 12px;
        justify-content: center;
      }

      .delete-confirm-btn,
      .delete-cancel-btn {
        padding: 8px 16px;
        border-radius: 4px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 80px;
      }

      .delete-confirm-btn {
        background: var(--cyberpunk-red);
        border: 1px solid var(--cyberpunk-red);
        color: #000;
      }

      .delete-confirm-btn:hover {
        background: #ff0000;
        box-shadow: 0 0 15px var(--cyberpunk-red);
      }

      .delete-cancel-btn {
        background: rgba(0, 255, 65, 0.1);
        border: 1px solid var(--neon-green);
        color: var(--neon-green);
      }

      .delete-cancel-btn:hover {
        background: rgba(0, 255, 65, 0.2);
        box-shadow: 0 0 15px var(--neon-green);
      }
    </style>

    <!-- Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("/sw.js")
            .then((registration) =>
              console.log("SW registered: ", registration)
            )
            .catch((registrationError) =>
              console.log("SW registration failed: ", registrationError)
            );
        });
      }
    </script>
  </head>
  <body>
    <!-- PARTICLES BACKGROUND -->
    <div id="particles-js"></div>

    <!-- MATRIX RAIN EFFECT -->
    <div class="matrix-bg" id="matrix-bg"></div>

    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
      <div class="loading-content">
        <div class="loading-logo">
          <i class="fas fa-brain fa-3x cyberpunk-glow"></i>
        </div>
        <h2 class="neon-text">CyberAgent</h2>
        <p class="cyberpunk-glow">Initializing Advanced AI Assistant...</p>
        <div class="loading-bar">
          <div class="loading-progress"></div>
        </div>
      </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app-container">
      <!-- Top Navigation -->
      <nav class="top-nav">
        <div class="nav-brand">
          <i class="fas fa-brain cyberpunk-glow"></i>
          <span class="brand-text">CyberAgent</span>
          <span class="version-badge">v2.0</span>
        </div>

        <div class="nav-controls">
          <button
            id="settings-toggle"
            class="nav-btn"
            title="Settings"
            aria-label="Settings"
          >
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </nav>

      <!-- Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <h3 class="cyberpunk-glow">Conversations</h3>
          <button id="new-chat" class="btn-new-chat">
            <i class="fas fa-plus"></i> New Chat
          </button>
        </div>

        <div class="conversation-list" id="conversation-list">
          <!-- Conversation items will be populated here -->
        </div>

        <div class="sidebar-footer">
          <div class="usage-stats">
            <div class="stat-item">
              <span class="stat-label">Messages</span>
              <span class="stat-value neon-text" id="total-messages">0</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Conversations</span>
              <span class="stat-value neon-text" id="total-conversations"
                >0</span
              >
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Chat Header -->
        <header class="chat-header">
          <div class="chat-info">
            <h1 id="chat-title" class="cyberpunk-glow">
              Welcome to CyberAgent
            </h1>
            <p id="chat-description">
              Your advanced AI assistant with multi-tool capabilities
            </p>
          </div>

          <div class="chat-actions">
            <button
              id="clear-chat"
              class="action-btn"
              title="Clear Chat"
              aria-label="Clear Chat"
            >
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </header>

        <!-- Messages Container -->
        <div class="messages-container" id="messages-container">
          <div class="welcome-screen" id="welcome-screen">
            <div class="welcome-content">
              <div class="welcome-icon">
                <i class="fas fa-robot fa-4x cyberpunk-glow"></i>
              </div>
              <h2 class="neon-text">Welcome to CyberAgent</h2>
              <p class="cyberpunk-glow">
                Your intelligent AI assistant with advanced multi-tool
                capabilities
              </p>

              <div class="capability-grid">
                <div class="capability-card">
                  <i class="fas fa-search cyberpunk-glow"></i>
                  <h3 class="neon-text">Smart Search</h3>
                  <p>Real-time web search with intelligent results</p>
                </div>
                <div class="capability-card">
                  <i class="fas fa-code cyberpunk-glow"></i>
                  <h3 class="neon-text">Code Execution</h3>
                  <p>Safe JavaScript execution with visualization</p>
                </div>
                <div class="capability-card">
                  <i class="fas fa-brain cyberpunk-glow"></i>
                  <h3 class="neon-text">AI Workflows</h3>
                  <p>Advanced data processing and analysis</p>
                </div>
                <div class="capability-card">
                  <i class="fas fa-microphone cyberpunk-glow"></i>
                  <h3 class="neon-text">Voice Interface</h3>
                  <p>Hands-free interaction with voice commands</p>
                </div>
              </div>

              <div class="quick-actions">
                <button
                  class="quick-action"
                  data-prompt="Help me research the latest AI developments"
                >
                  <i class="fas fa-flask"></i>
                  Research AI Trends
                </button>
                <button
                  class="quick-action"
                  data-prompt="Create a data visualization showing sample sales data"
                >
                  <i class="fas fa-chart-bar"></i>
                  Create Visualization
                </button>
                <button
                  class="quick-action"
                  data-prompt="Help me write and test a JavaScript function"
                >
                  <i class="fas fa-code"></i>
                  Code Assistant
                </button>
              </div>
            </div>
          </div>

          <div class="messages" id="messages">
            <!-- Messages will be populated here -->
          </div>
        </div>

        <!-- Input Area -->
        <div class="input-area">
          <div class="input-container">
            <div class="file-drop-zone cyberpunk-border" id="file-drop-zone">
              <i class="fas fa-cloud-upload-alt cyberpunk-glow"></i>
              <p class="neon-text">Drop files here for AI analysis</p>
              <small class="file-types-hint"
                >Supports: .txt, .md, .js, .py, .json, .csv, .html, .css, .xml,
                .yaml, .sql, .log</small
              >
            </div>

            <div class="input-wrapper">
              <button
                id="attach-file"
                class="input-btn"
                title="Attach File"
                aria-label="Attach File"
              >
                <i class="fas fa-paperclip"></i>
              </button>

              <textarea
                id="user-input"
                placeholder="Type your message here... Press Enter to send, Shift+Enter for new line"
                rows="1"
                maxlength="5000"
              ></textarea>

              <div class="input-actions">
                <button
                  id="file-upload-btn"
                  class="input-btn file-btn"
                  title="Upload File for Analysis"
                  aria-label="Upload File"
                  onclick="document.getElementById('file-input').click()"
                >
                  <i class="fas fa-paperclip"></i>
                </button>
                <button
                  id="voice-input"
                  class="input-btn voice-btn"
                  title="Voice Input"
                  aria-label="Voice Input"
                >
                  <i class="fas fa-microphone"></i>
                </button>
                <button
                  id="send-message"
                  class="send-btn"
                  title="Send Message"
                  aria-label="Send Message"
                >
                  <i class="fas fa-paper-plane"></i>
                </button>
              </div>
            </div>

            <div class="input-footer">
              <div class="character-count">
                <span id="char-count" class="neon-text">0</span>/5000
              </div>

              <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots">
                  <span></span>
                  <span></span>
                  <span></span>
                </div>
                <span class="typing-text cyberpunk-glow"
                  >AI is thinking...</span
                >
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="neon-text">Settings</h2>
          <button
            class="modal-close"
            id="close-settings"
            aria-label="Close Settings"
          >
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div class="modal-body">
          <div class="settings-tabs">
            <button class="tab-btn active" data-tab="api">
              API Configuration
            </button>
          </div>

          <!-- API Configuration Tab -->
          <div class="tab-content active" id="api-tab">
            <div class="form-group">
              <label for="llm-provider">LLM Provider</label>
              <select id="llm-provider" class="form-control">
                <!-- Google Gemini as first option (recommended) -->
                <option value="google">Google Gemini</option>
                <option value="aipipe">AI Pipe (aipipe.org)</option>
                <option value="openai">OpenAI GPT</option>
                <option value="anthropic">Anthropic Claude</option>
                <option value="local">Local Model</option>
              </select>
            </div>

            <div class="form-group">
              <label for="api-key">API Key / Token</label>
              <div class="input-with-icon">
                <input
                  type="password"
                  id="api-key"
                  class="form-control"
                  placeholder="Enter your API key or AI Pipe token"
                />
                <button
                  class="toggle-visibility"
                  type="button"
                  aria-label="Toggle API key visibility"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>

            <div class="form-group">
              <label for="model-name">Model</label>
              <select id="model-name" class="form-control"></select>
            </div>

            <div class="form-group">
              <label for="max-tokens">Max Tokens</label>
              <input
                type="number"
                id="max-tokens"
                class="form-control"
                value="2000"
                min="100"
                max="8000"
              />
            </div>

            <div class="form-group">
              <label for="temperature">Temperature</label>
              <input
                type="range"
                id="temperature"
                class="form-range"
                min="0"
                max="2"
                step="0.1"
                value="0.7"
              />
              <span class="range-value neon-text">0.7</span>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button id="export-settings" class="btn btn-secondary">
            <i class="fas fa-download"></i>
            Export Settings
          </button>
          <button id="import-settings" class="btn btn-secondary">
            <i class="fas fa-upload"></i>
            Import Settings
          </button>
          <button id="save-settings" class="btn btn-primary">
            <i class="fas fa-save"></i>
            Save Settings
          </button>
        </div>
      </div>
    </div>

    <!-- Performance Monitor -->
    <div id="performance-monitor" class="performance-monitor">
      <div class="perf-header">
        <h4 class="neon-text">Performance</h4>
        <button
          id="toggle-perf"
          class="perf-toggle"
          aria-label="Toggle Performance"
        >
          <i class="fas fa-chart-line"></i>
        </button>
      </div>
      <div class="perf-metrics">
        <div class="metric">
          <span class="metric-label">Response Time</span>
          <span class="metric-value neon-text" id="response-time">0ms</span>
        </div>
        <div class="metric">
          <span class="metric-label">Memory Usage</span>
          <span class="metric-value neon-text" id="memory-usage">0MB</span>
        </div>
        <div class="metric">
          <span class="metric-label">API Calls</span>
          <span class="metric-value neon-text" id="api-calls">0</span>
        </div>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container">
      <!-- Toast messages will be added here -->
    </div>

    <!-- Context Menu -->
    <div id="context-menu" class="context-menu">
      <div class="context-item" data-action="copy">
        <i class="fas fa-copy"></i> Copy
      </div>
      <div class="context-item" data-action="edit">
        <i class="fas fa-edit"></i> Edit
      </div>
      <div class="context-item" data-action="bookmark">
        <i class="fas fa-bookmark"></i> Bookmark
      </div>
    </div>

    <!-- File Input -->
    <input
      type="file"
      id="file-input"
      multiple
      accept=".txt,.json,.csv,.md,.js,.py,.html,.css,.xml,.yaml,.yml,.sql,.log,.rtf"
      style="display: none"
    />

    <!-- Delete Conversation Confirmation Modal -->
    <div id="delete-confirmation-modal" class="delete-confirmation-modal">
      <div class="delete-confirmation-content">
        <div class="delete-confirmation-title">⚠️ NEURAL PURGE WARNING ⚠️</div>
        <div class="delete-confirmation-text" id="delete-confirmation-text">
          Are you sure you want to permanently delete this conversation?<br />
          <strong>This action cannot be undone.</strong>
        </div>
        <div class="delete-confirmation-buttons">
          <button id="delete-confirm-btn" class="delete-confirm-btn">
            <i class="fas fa-skull"></i> PURGE
          </button>
          <button id="delete-cancel-btn" class="delete-cancel-btn">
            <i class="fas fa-shield"></i> ABORT
          </button>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="agent.js"></script>

    <script>
      // CYBERPUNK ENHANCEMENT INITIALIZATION
      document.addEventListener("DOMContentLoaded", () => {
        // Initialize code highlighting
        if (window.hljs && typeof hljs.highlightAll === "function") {
          hljs.highlightAll();
        }

        // MATRIX RAIN EFFECT
        function initMatrixRain() {
          const matrixBg = document.getElementById("matrix-bg");
          const chars =
            "01アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヲン";

          function createMatrixColumn() {
            const column = document.createElement("div");
            column.className = "matrix-column";
            column.style.left = Math.random() * 100 + "%";
            column.style.animationDuration = Math.random() * 3 + 2 + "s";

            let text = "";
            for (let i = 0; i < 15; i++) {
              text += chars[Math.floor(Math.random() * chars.length)] + "<br>";
            }
            column.innerHTML = text;

            matrixBg.appendChild(column);

            setTimeout(() => {
              if (matrixBg.contains(column)) {
                matrixBg.removeChild(column);
              }
            }, 5000);
          }

          setInterval(createMatrixColumn, 500);
        }

        // PARTICLES.JS CONFIGURATION
        if (window.particlesJS) {
          particlesJS("particles-js", {
            particles: {
              number: { value: 80, density: { enable: true, value_area: 800 } },
              color: { value: "#00ff41" },
              shape: { type: "circle" },
              opacity: { value: 0.3, random: true },
              size: { value: 2, random: true },
              line_linked: {
                enable: true,
                distance: 150,
                color: "#00ff41",
                opacity: 0.2,
                width: 1,
              },
              move: {
                enable: true,
                speed: 1,
                direction: "none",
                random: true,
                straight: false,
                out_mode: "out",
                bounce: false,
              },
            },
            interactivity: {
              detect_on: "canvas",
              events: {
                onhover: { enable: true, mode: "repulse" },
                onclick: { enable: true, mode: "push" },
                resize: true,
              },
            },
            retina_detect: true,
          });
        }

        // ENHANCED LOADING SCREEN
        const loadingScreen = document.getElementById("loading-screen");
        setTimeout(() => {
          if (loadingScreen) {
            loadingScreen.style.opacity = "0";
            setTimeout(() => {
              loadingScreen.style.display = "none";
            }, 1000);
          }
        }, 2000);

        // CHARACTER COUNT ENHANCEMENT
        const userInput = document.getElementById("user-input");
        const charCount = document.getElementById("char-count");

        if (userInput && charCount) {
          userInput.addEventListener("input", () => {
            charCount.textContent = userInput.value.length;
          });
        }

        // CYBERPUNK BUTTON ENHANCEMENTS
        const buttons = document.querySelectorAll("button");
        buttons.forEach((btn) => {
          btn.addEventListener("mouseenter", () => {
            btn.style.boxShadow = "0 0 15px var(--neon-green)";
          });
          btn.addEventListener("mouseleave", () => {
            btn.style.boxShadow = "";
          });
        });

        // RANDOM GLITCH EFFECTS
        function addRandomGlitch() {
          const glitchableElements = document.querySelectorAll(
            ".cyberpunk-glow, .neon-text"
          );
          glitchableElements.forEach((el) => {
            if (Math.random() < 0.1) {
              // 10% chance
              el.classList.add("glitch-effect");
              setTimeout(() => {
                el.classList.remove("glitch-effect");
              }, 300);
            }
          });
        }

        // Start effects after a short delay
        setTimeout(() => {
          initMatrixRain();
          setInterval(addRandomGlitch, 3000);
          console.log("🔥 CYBERPUNK CyberAgent INITIALIZED 🔥");
        }, 1000);
      });
    </script>
  </body>
</html>
